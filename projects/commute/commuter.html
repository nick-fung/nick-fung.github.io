<!doctype html>
<!--AIzaSyBMfCXj47Z9Vm1ZVn73ZQIc5QUixkyK8XY-->
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>My Commuter Project</title>
        <link type="text/css" rel="stylesheet" href="index.css">
        <link type="text/css" rel="stylesheet" href="animate.css">
        <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"/>
        <script type="text/javascript" src="jquery-3.2.1.min.js"></script>
    </head>
    <body>
        <div id="flex_container">
            <div id="documentation">
                <h1>A Commuter's Travel Habits</h1>
                <h2>Preface</h2>
                <p> Why am I documenting this? While mainly for my own use, I'm also documenting my project process for anyone who's interested in viewing my thought process while I'm learning.</p>
                <h2>Motivation and Goals</h2>
                <p>For the first couple months of the school, I've been commuting to and from UBC by bike. Then it started raining. And then it started getting cold. That made me wonder - how does the weather affect my travel patterns? What about my travel time to school? <br>
                <br> What do I want out of this? 
                </p>
                <ul>
                    <li>To learn the fundamental of web development, i.e. HTML, CSS, Javascript. Specifically, I want to be able create design that doesn't look like complete garbage, and I also be able to utilize open-source Javascript libraries.</li>
                    <li>To be able to grasp a basic understanding of statistics and data analytics. I haven't had a class on stats yet so this would be a good start.</li>
                </ul>
                <p>Coming from a Computer Engineering background, I'm more familiar with low level programming languages as well as hardware description languages so I think would be nice to learn a little bit about design and some high level programming languages such as JavaScript.</p>
                <h2>Functionality</h2>
                <p>What do I think about when I use a web app? I have absolutely no design background, but here's what I look for as a user:</p>
                <ul>
                    <li>Is the page easy to navigate and easy to use? Are there any unnecessary bells and whistles that might be confusing?</li>
                    <li>Is the page visually appealing? Layout, color scheme, choice of images, etc. all tie in to this. </li>
                    <li>Functionality - is the app even useful/does it have any cool features that might be unique or fun to use? </li>
                    <li>Performance -  does the application run for a reasonable amount of time for what it's specific functionality?</li>
                </ul>
                <p>Taking all this in mind, I've been able to come up with a list of requirements that my website might need. Of course, while developing the application, there's bound to be specifications that need rethinking; after all, that's what the design process is all about.</p>
                <ol>
                    <h3>Desired Features:</h3>
                    <li>A map that shows my route to school, and which classrooms I stay in the most during an average school day. Ideally it would be a heatmap, showing which route I like to take the most</li>
                    <li>A graph showing the distance I travelled each day by bike, by walking, and by bus. Another graph showing cumulative distance would also be nice.</li>
                    <li>A graph with temperatures and precipitation against time. I also want to be able to see to what extent temperature and rain affects my travel patterns.</li>
                </ol>
                <p>Of course, this list is going to grow and will modified constantly, seeing as I don't really know the uses and limitations of Javascript </p>

                <h2>Implementation</h2>
                <h3>Data Acquisition</h3>
                <p>Firstly, I needed to have a method to collect data about my travel habits, as well as the weather. Since I have an Android, I enabled Google Timelines to track my location. Just by looking at the raw data from Google Timeline (shown below), it doesn't seem to be too bad. The update rate seems to be about once every few minutes - which isnt exactly ideal for short journeys, but it does the job. Weather data was easy enough to find; as it turns out, the government provides daily historical data for free, in a CSV format.

                <img id='sample_timeline' src="images/sampleGoogleTimeline.png" alt="A sample of Google Timeline's tracking">

                <h3>Data Processing</h3>
                <p>After sifting through the JSON data that Google data provided, it turned out to be <em>quite</em> difficult to parse and use for the Google Maps API. Ater some digging around on the web, I found <a href='https://locationhistoryvisualizer.com/heatmap/'>a website that takes Timeline data and creates a heatmap.</a>. Amazingly, they're open source, and provide the code on Github! So why reinvent the wheel?</p>

                <h4><em>Resources and References</em></h4>
                <p>Being my first time using HTML, CSS, and Javascript, I've had to gather knowledge from a variety of different sources. Of course, StackOverflow was used regularly. Heres some other resources that I used in this project:</p>
                <ul>
                    <li><a href="https://google-developers.appspot.com/maps/documentation/">Google Maps API Documentation</a> - I think it's pretty important for any Software Developer (and Engineer!) to understand documentation written by others. I used this pretty extensively.</li>
                    <li><a href='https://www.w3schools.com/'>W3Schools</a> - A pretty great resource for learning about web development. I also used <a href='https://www.freecodecamp.org/'>FreeCodeCamp</a> for a little while to get used to writing in new languages.</li>
                </ul>
            </div>
            <div class="visualizer">
                <h2>Heatmap Visualizer</h2>
                <!-- Shown before the heatmap is displayed -->
                <div class="container">
                    <div class="content">
                        <!-- Intro, before data has been uploaded -->
                        <div id="intro" class="content-box">
                            <h2>Location History Visualizer</h2>
                            <p>Welcome to <b>Location History Visualizer</b>, a tool for visualizing your collected Google <a href="https://google.com/locationhistory" target="_blank">Location History</a> data with heatmaps. <i>Don't worry&mdash;all processing and visualization happens directly on your computer, so rest assured that nobody is able to access your Location History but you... and Google, of course.</i></p>
                            <p>To start off, you'll need to go to <a href="https://google.com/takeout" target="_blank">Google Takeout</a> to download your Location History data: on that page, deselect everything except Location History by clicking "Select none" and then reselecting "Location History". Then hit "Next" and, finally, click "Create archive". Once the archive has been created, click "Download". Unzip the downloaded file, and open the "Location History" folder within. <b>Then, drag and drop <i>LocationHistory.json</i> from inside that folder onto this page.</b> Let the visualization begin!</p>
                            <p class="fallback">Alternatively, select your <b>LocationHistory.json</b> file directly: <input name="file" type="file" id="file"></input></p>
                            <p class="credit">An <a target="_blank" href="https://github.com/theopolisme/location-history-visualizer">open source</a> project by the makers of <a href="/">Location History Visualizer Pro</a>.</p>
                        </div>

                        <!-- Shown in interim while processing is in progress -->
                        <div id="working" class="content-box hidden">
                            <h2>Processing data...</h2>
                            <div class="loading">
                                <div class="bounce1"></div>
                                <div class="bounce2"></div>
                                <div class="bounce3"></div>
                            </div>
                            <p><span id="currentStatus">Waking up...</span></p>
                            <p>This may take a while... sit back, get a cup of tea or something.</p>
                            <p><i>Why does it take so long?</i> Depending on how long Google's been tracking your location, you may have hundreds of thousands of [latitude, longitude] pairs, every one of which must be loaded, analyzed, and plotted. That's a lot of dots.</p>
                        </div>

                        <!-- Content displayed once processing complete -->
                        <div id="done" class="content-box hidden">
                            <h2>Render complete!</h2>
                            <p>Successfully processed <span id="numberProcessed">a lot of</span> data points to generate your heatmap. Please submit your email address to start exploring...</p>
                            <div class="email-form">
                                <input id="email" type="email" placeholder="Email address" />
                                <button id="launch">Launch heatmap</button>
                            </div>
                            <p>Usage tips: <i>Zoom</i> by scrolling, double-clicking, or using the buttons in the upper lefthand corner. <i>Navigate</i> by clicking and dragging. Hover over the menu in the lower lefthand corner to customize the heatmap rendering.</p>
                            <div class="disclaimer">By submitting your email address you agree to receive interesting communications from the Location History Visualizer team from time to time. If you're not interested, you can unsubscribe immediately.</div>
                            <p class="credit">An <a target="_blank" href="https://github.com/theopolisme/location-history-visualizer">open source</a> project by the makers of <a href="/">Location History Visualizer Pro</a>.</p>
                        </div>
                    </div>
                </div>

                <!-- Appear when heatmap is displayed -->
                <div id="controls">
                    <div class="title">
                        Location History Visualizer
                        <span>(hover for additional controls)</span>
                    </div>
                    <div class="control-block">
                        <label for="radius">Point radius</label>
                        <input type="range" min="1" max="30" id="radius" class="control">
                    </div>
                    <div class="control-block">
                        <label for="blur">Blur radius</label>
                        <input type="range" min="1" max="25" id="blur" class="control">
                    </div>
                    <div class="control-block">
                        <label for="heatOpacity">Heat opacity</label>
                        <input type="range" min="0" max="1" step="0.05" id="heatOpacity" class="control">
                    </div>
                    <div class="control-block">
                        <label for="tileOpacity">Map opacity</label>
                        <input type="range" min="0" max="1" step="0.05" id="tileOpacity" class="control">
                    </div>
                    <div class="control-block actions">
                        <button id="reset">Reset to defaults</button>
                    </div>
                </div>

                <!-- The map, populated by leaflet.js -->
                <div id="map"></div>
            </div>
        </div>

        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/dropzone.min.js"></script>
        <script type="text/javascript" src="lib/leaflet.heat.min.js"></script>
        <script type="text/javascript" src="lib/prettysize.js"></script>
        <script type="text/javascript" src="lib/oboe-browser.min.js"></script>
        <script type="text/javascript" src="index.js"></script>
        <script type="text/javascript" src="commuter.js"></script>
        <!--script type="text/javascript" src="data/LocationHistory.json"></script-->
        <!--script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCeJufzeYHhQo2PIfpYX5HxrA6zFNWfkGY&callback=initMap" type="text/javascript"></script-->
        <!-- BEGIN GOOGLE ANALYTICS -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-55418641-9', 'auto');
            ga('send', 'pageview');
        </script>
        <!-- END GOOGLE ANALYTICS -->
    </body>
</html>
